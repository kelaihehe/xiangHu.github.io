---
title: sspringCloud Alibaba—seata0.9源码分析 8、扩展
date: 2020-07-15 22:20:43
tags:
  - SpringCloud Alibaba
  - seata
summary: seata扩展知识点
categories: SpringCloud Alibaba
---

分布式事务协议：
* XA：
	* 二阶段提交：准备阶段和提交阶段
		* 准备阶段：RM开启本地事务，但不提交事务，而是向TM发送成功或失败请求
		* 提交阶段：TM只有等到所有的RM的成功请求，才会向它们发送提交命令，RM即在各自本地执行提交。只要有一个失败，则发送回滚
	* 保证强一致性
	* 效率低
	* AT模式
	*	 二阶段提交
			* 一阶段：RM开启本地事务，执行后，注册分支事务，提交本地事务
			* 二阶段：TM发送全局提交或全局回滚，由TC向各RM发送提交或回滚命令
	* 补偿机制来实现回滚
	* 无代码侵入
	* 最终一致性
* TCC模式
*	 二阶段提交
	* 补偿机制
	* 有强代码侵入


* SAGA模式
	* 由事件监听机制来实现分支事务的传播。
		* 上游服务执行完事务后发布事件，该事件会由下游服务监听到，并执行本地事务发布新的事件。当最后一个服务执行完本地事务且不再不发任何事务，表示全局事务结束。
		* 若调用链中出现异常，则会发布对应的异常事件，该事件会由上游的服务监听到，上游服务会执行反向补偿，实现rollback
	* 补偿机制
	* 强业务侵入
	* 最终一致性

