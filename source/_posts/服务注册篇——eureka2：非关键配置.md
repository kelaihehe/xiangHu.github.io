---
title: 服务注册篇——eureka2：非关键配置
date: 2020-07-15 08:26:38
tags:
  - SpringCloud
  - eureka
summary: eureka的一些非关键配置
categories: SpringCloud
---

## 1、在eureka的web界面，可以直接看到每个服务实例的ip ##

- 配置
{% asset_img Image1.png  %}
- 结果
{% asset_img Image2.png  %}

## 2、关闭eureka的自我保护机制 ##
- 禁用自我保护模式的配置：
	- eureka.server.enable-self-preservation = false
- eureka的自我保护机制
	- 在开启eureka时，过了一段时间，该服务器页面上就出现以下红色提示
	- 这不是警告也不是错误，这只是eureka的一种保护机制，保护注册服务器上的应用实例
	- 自我保护机制：
		- 首先，eureka客户（即应用实例）注册到eureka服务器上后，会默认每隔30s发送一次心跳进行续约。这个续约会告知eureka服务器自己还存在。
		- 但是默认情况下，如果eureka服务默认90s没有受到心跳，那么将会注销该实例
		-	 但是这样存在一个问题：如果某实例并没有关闭，只是由于网络暂时发生故障，使得没有及时发送心跳，那么如果这时eureka服务将它注销，过段时间该实例的网络好了，可以发送心跳，但是eureka服务已经将它注销删除了，那么其他实例就访问不了该实例了，那么该实例只能重启。
			- 但是eureka通过“自我保护机制”来解决以上问题。
			- 当eureka服务短时间内没有收到某实例的心跳，那么将进入自我保护模式。即出现红色提示
			- 该模式下，eureka服务不会将这些实例注销，当重新受到这些实例的心跳后，自动退出保护模式
		- 自我保护机制的设计理念是
			- 宁可保留错误的服务注册信息，也不盲目注销任何可能的服务实例




